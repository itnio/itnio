import{s as t,p as e,c as a,w as s,i as l,o as n,a as r,b as o,t as i,d,r as c,F as u,j as h,l as g,f,I as p,n as v,u as _,v as C}from"./index-5BywQYfU.js";/* empty css                                                                 */import{_ as y}from"./_plugin-vue_export-helper.BCo6x5W8.js";const k=y({data:()=>({currentYear:(new Date).getFullYear(),currentMonth:(new Date).getMonth(),selectedDate:"",tagTitle:"",tagColor:"#FF5733",events:{},existingTags:[],weekdays:["日","一","二","三","四","五","六"],days:[]}),created(){this.generateCalendar(),this.loadTagsFromServer()},methods:{generateCalendar(){const t=new Date(this.currentYear,this.currentMonth,1).getDay(),e=new Date(this.currentYear,this.currentMonth+1,0).getDate();this.days=[];for(let a=0;a<t;a++)this.days.push({date:"",isCurrentMonth:!1});for(let a=1;a<=e;a++)this.days.push({date:a,isCurrentMonth:!0})},prevMonth(){0===this.currentMonth?(this.currentYear--,this.currentMonth=11):this.currentMonth--,this.generateCalendar()},nextMonth(){11===this.currentMonth?(this.currentYear++,this.currentMonth=0):this.currentMonth++,this.generateCalendar()},selectDay(t){t.isCurrentMonth&&(this.selectedDate=`${this.currentYear}-${(this.currentMonth+1).toString().padStart(2,"0")}-${t.date.toString().padStart(2,"0")}`)},addTag(){if(!this.tagTitle)return void t({title:"请输入标签标题",icon:"none"});const e={title:this.tagTitle,color:this.tagColor};this.existingTags.push(e),this.tagTitle="",this.tagColor="#FF5733"},addTagToSelectedDate(e){this.selectedDate?(this.events[this.selectedDate]||(this.events[this.selectedDate]=[]),this.events[this.selectedDate].push(e)):t({title:"请先选择日期",icon:"none"})},isSelected(t){return this.selectedDate===`${this.currentYear}-${(this.currentMonth+1).toString().padStart(2,"0")}-${t.date.toString().padStart(2,"0")}`},formatDate(t){if(!t)return"";const e=(this.currentMonth+1).toString().padStart(2,"0"),a=t.toString().padStart(2,"0");return`${this.currentYear}-${e}-${a}`},removeExistingTag(t){this.existingTags.splice(t,1)},removeEvent(t,e){const a=this.formatDate(t);this.events[a].splice(e,1),0===this.events[a].length&&delete this.events[a]},saveTags(){e({url:"https://your-server-endpoint/save-tags",method:"POST",data:this.events,success:e=>{t({title:"保存成功",icon:"success"})},fail:e=>{t({title:"保存失败",icon:"none"})}})},loadTagsFromServer(){e({url:"https://your-server-endpoint/load-tags",method:"GET",success:t=>{this.events=t.data,this.loadExistingTags()},fail:e=>{t({title:"加载失败",icon:"none"})}})},loadExistingTags(){const t=[];for(let e in this.events)this.events[e].forEach((e=>{t.some((t=>t.title===e.title&&t.color===e.color))||t.push(e)}));this.existingTags=t}}},[["render",function(t,e,y,k,m,T){const x=g,D=f,M=l,S=p;return n(),a(M,{class:"container"},{default:s((()=>[r(M,{class:"calendar-header"},{default:s((()=>[r(x,{onClick:T.prevMonth},{default:s((()=>[o("上个月")])),_:1},8,["onClick"]),r(D,null,{default:s((()=>[o(i(m.currentYear)+"年"+i(m.currentMonth+1)+"月",1)])),_:1}),r(x,{onClick:T.nextMonth},{default:s((()=>[o("下个月")])),_:1},8,["onClick"])])),_:1}),r(M,{class:"calendar"},{default:s((()=>[r(M,{class:"weekdays"},{default:s((()=>[(n(!0),d(u,null,c(m.weekdays,((t,e)=>(n(),a(D,{key:e},{default:s((()=>[o(i(t),1)])),_:2},1024)))),128))])),_:1}),r(M,{class:"days"},{default:s((()=>[(n(!0),d(u,null,c(m.days,((t,e)=>(n(),a(M,{key:e,class:v(["day",{selected:T.isSelected(t)}]),onClick:e=>T.selectDay(t)},{default:s((()=>[r(D,null,{default:s((()=>[o(i(t.date),1)])),_:2},1024),m.events[T.formatDate(t.date)]?(n(),a(M,{key:0,class:"events"},{default:s((()=>[(n(!0),d(u,null,c(m.events[T.formatDate(t.date)],((e,l)=>(n(),a(M,{key:l,style:_({borderColor:e.color,backgroundColor:e.color+"33"}),class:"event"},{default:s((()=>[r(D,null,{default:s((()=>[o(i(e.title),1)])),_:2},1024),r(D,{onClick:C((e=>T.removeEvent(t.date,l)),["stop"])},{default:s((()=>[o("x")])),_:2},1032,["onClick"])])),_:2},1032,["style"])))),128))])),_:2},1024)):h("",!0)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),m.existingTags.length?(n(),a(M,{key:0,class:"existing-tags",style:{display:"flex","align-items":"left"}},{default:s((()=>[r(D,null,{default:s((()=>[o("选择标签：")])),_:1}),(n(!0),d(u,null,c(m.existingTags,((t,e)=>(n(),a(M,{key:e,class:"existing-tag"},{default:s((()=>[r(D,{onClick:e=>T.addTagToSelectedDate(t)},{default:s((()=>[o(i(t.title),1)])),_:2},1032,["onClick"]),r(M,{style:_({backgroundColor:t.color}),class:"color-box"},null,8,["style"]),r(D,{onClick:t=>T.removeExistingTag(e)},{default:s((()=>[o("x")])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})):h("",!0),r(M,{class:"tag-form"},{default:s((()=>[r(D,null,{default:s((()=>[o("添加新标签：")])),_:1}),r(S,{modelValue:m.tagTitle,"onUpdate:modelValue":e[0]||(e[0]=t=>m.tagTitle=t),placeholder:"标签标题",class:"input-field"},null,8,["modelValue"]),r(S,{type:"color",modelValue:m.tagColor,"onUpdate:modelValue":e[1]||(e[1]=t=>m.tagColor=t),class:"color-picker"},null,8,["modelValue"]),r(x,{onClick:T.addTag,class:"submit-button"},{default:s((()=>[o("添加标签")])),_:1},8,["onClick"]),r(x,{onClick:T.saveTags,class:"save-button"},{default:s((()=>[o("保存")])),_:1},8,["onClick"])])),_:1})])),_:1})}],["__scopeId","data-v-8f0c2650"]]);export{k as default};
